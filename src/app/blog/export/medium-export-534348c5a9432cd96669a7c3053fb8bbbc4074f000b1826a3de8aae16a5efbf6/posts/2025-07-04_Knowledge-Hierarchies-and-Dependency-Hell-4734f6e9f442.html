<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Knowledge Hierarchies and Dependency Hell</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Knowledge Hierarchies and Dependency Hell</h1>
</header>
<section data-field="subtitle" class="p-summary">
June 4–5, 2025
</section>
<section data-field="body" class="e-content">
<section name="4c58" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="beac" id="beac" class="graf graf--h3 graf--leading graf--title">Knowledge Hierarchies and Dependency Hell</h3><figure name="8b27" id="8b27" class="graf graf--figure graf--startsWithDoubleQuote graf-after--h3"><img class="graf-image" data-image-id="1*R4UayJTE7hY3MxlzqYSLFw.png" data-width="1536" data-height="1024" data-is-featured="true" alt="A man plays Jenga with a robot." src="https://cdn-images-1.medium.com/max/800/1*R4UayJTE7hY3MxlzqYSLFw.png"><figcaption class="imageCaption">“This seems safe!”</figcaption></figure><p name="81fe" id="81fe" class="graf graf--p graf-after--figure"><em class="markup--em markup--p-em">June 4–5, 2025</em></p><p name="a954" id="a954" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--p"><span class="graf-dropCap">Y</span>ou know that moment when a simple feature request reveals a fundamental truth about your domain? That happened when I tried to upload my book to Piper Morgan.</p><p name="f09e" id="f09e" class="graf graf--p graf--startsWithDoubleQuote graf-after--p">“Just ingest a PDF,” I thought. “How hard could it be?”</p><p name="92e6" id="92e6" class="graf graf--p graf-after--p">(Narrator: It was exactly as hard as it needed to be to teach important lessons.)</p><h3 name="c676" id="c676" class="graf graf--h3 graf-after--p">The knowledge hierarchy epiphany</h3><p name="ad20" id="ad20" class="graf graf--p graf-after--h3">While fighting with file uploads, I had to decide: Where does this knowledge go? That’s when I proposed a four-tier structure:</p><ol class="postList"><li name="4b31" id="4b31" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">pm_fundamentals</strong> — Core PM knowledge (books, methodologies)</li><li name="de32" id="de32" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">business_context</strong> — Company and industry specifics</li><li name="f121" id="f121" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">product_context</strong> — Product details and history</li><li name="41e7" id="41e7" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">task_context</strong> — Specific task patterns</li></ol><p name="09aa" id="09aa" class="graf graf--p graf-after--li">This isn’t arbitrary. It mirrors the contextual layers PMs need to zoom between all the time. You can’t understand why your company does standups differently until you know what standups are supposed to accomplish. You can’t design product features without understanding the business model.</p><p name="fb65" id="fb65" class="graf graf--p graf-after--p">When we were building productivity software at CloudOn, we had no idea at first that we were going to pivot from virtualization (what Citrix does) to a native gesture-first interface, and we couldn’t really ever have figured out how to build that UI without first experience all the joys and sorrows of streaming video.</p><p name="c9ec" id="c9ec" class="graf graf--p graf-after--p">The hierarchy cascades. Each level assumes knowledge from the level above. Just like real life.</p><h3 name="ca5a" id="ca5a" class="graf graf--h3 graf-after--p">Enter dependency Hell</h3><p name="1623" id="1623" class="graf graf--p graf-after--h3">Of course, the moment I had this elegant architecture, Python decided to teach me humility.</p><p name="bc3b" id="bc3b" class="graf graf--p graf-after--p">First, the import errors:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="vbnet" name="1a94" id="1a94" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-symbol">pImportError:</span> No <span class="hljs-keyword">module</span> named <span class="hljs-comment">&#x27;services.knowledge_graph&#x27;</span></span></pre><p name="37a2" id="37a2" class="graf graf--p graf-after--pre">But I <em class="markup--em markup--p-em">had</em> a knowledge_graph directory! Turns out, Python cares deeply about whether you use hyphens or underscores. And whether your <code class="markup--code markup--p-code">__init__.py</code> file exists. And whether it&#39;s spelled correctly (not <code class="markup--code markup--p-code">__init__ .py</code> with a space, thanks Cursor Agent).</p><p name="3fd4" id="3fd4" class="graf graf--p graf-after--p">Then ChromaDB joined the party:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="makefile" name="6076" id="6076" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-section">AttributeError: np.float_ was removed in NumPy 2.0</span></span></pre><p name="7b51" id="7b51" class="graf graf--p graf-after--pre">Cool. My vector database was incompatible with modern NumPy. Because of course it was. Over the next few weeks I would come to curse this “numpy mismatch.” Every time things weren’t working and I was trying to clean up an environment or a build eventually I’d have to downgrade NumPy. Eventually I asked how to pin the version but until I asked I was going to keep walking into that wall. And there are others like that.</p><h3 name="d109" id="d109" class="graf graf--h3 graf-after--p">The two-laptop tango</h3><p name="c896" id="c896" class="graf graf--p graf-after--h3">Did I mention I’m developing on two laptops? Personal (faoilean) and work (kindbook). Because apparently I enjoy pain.</p><p name="2a6d" id="2a6d" class="graf graf--p graf-after--p">This revealed gaps in our git workflow:</p><ul class="postList"><li name="a3dd" id="a3dd" class="graf graf--li graf-after--p">Laptop A: “Everything works!”</li><li name="a0fc" id="a0fc" class="graf graf--li graf-after--li">Laptop B: “What are these 47 missing dependencies?”</li><li name="25d5" id="25d5" class="graf graf--li graf-after--li">Me: “They’re the same code!”</li><li name="4746" id="4746" class="graf graf--li graf-after--li">Git: “Are they though?”</li></ul><h3 name="4d57" id="4d57" class="graf graf--h3 graf-after--li">Premature initialization: it happens to everybody sometimes</h3><p name="8188" id="8188" class="graf graf--p graf-after--h3">The worst bug was subtle. The DocumentIngester was initializing before environment variables loaded:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="makefile" name="8863" id="8863" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-comment"># This runs when the module loads</span><br />ingester = DocumentIngester()  <span class="hljs-comment"># ANTHROPIC_API_KEY not found!</span><br /><br /><span class="hljs-comment"># This runs when the server starts</span><br />load_dotenv()  <span class="hljs-comment"># Too late!</span></span></pre><p name="5b8a" id="5b8a" class="graf graf--p graf-after--pre">Solution? Lazy initialization:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="ruby" name="33de" id="33de" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ingester</span>():<br />    <span class="hljs-keyword">return</span> <span class="hljs-title class_">DocumentIngester</span>()  <span class="hljs-comment"># Created after env vars load</span></span></pre><p name="c404" id="c404" class="graf graf--p graf-after--pre">It’s not elegant. But it works. (My new motto.)</p><h3 name="89b7" id="89b7" class="graf graf--h3 graf-after--p">What I actually learned</h3><p name="a6bf" id="a6bf" class="graf graf--p graf-after--h3">Each frustration taught something:</p><ol class="postList"><li name="b2db" id="b2db" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Python’s import system is unforgiving</strong> — Respect the naming conventions or suffer</li><li name="9880" id="9880" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Version compatibility matters deeply</strong> — The AI ecosystem moves fast and breaks things</li><li name="3fcd" id="3fcd" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Lazy initialization prevents startup pain</strong> — Don’t create objects until you need them</li><li name="8d62" id="8d62" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Multi-laptop development keeps you honest</strong> — If it works on both, it’ll work anywhere</li></ol><h3 name="ade7" id="ade7" class="graf graf--h3 graf-after--li">The payoff</h3><p name="0e04" id="0e04" class="graf graf--p graf-after--h3">After two days of fighting (and help from my AI assistants who kept apologizing for the confusion), we successfully:</p><ul class="postList"><li name="8665" id="8665" class="graf graf--li graf-after--p">Ingested <a href="https://rosenfeldmedia.com/books/product-management-for-ux-people/" data-href="https://rosenfeldmedia.com/books/product-management-for-ux-people/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><em class="markup--em markup--li-em">Product Management for UX People</em></a> into 85 searchable chunks</li><li name="b007" id="b007" class="graf graf--li graf-after--li">Tagged it with the pm_fundamentals domain</li><li name="f19c" id="f19c" class="graf graf--li graf-after--li">Verified search returns relevant, contextual results</li><li name="3c7c" id="3c7c" class="graf graf--li graf-after--li">Connected knowledge to our learning scaffolding</li></ul><p name="a1c0" id="a1c0" class="graf graf--p graf-after--li">Now when someone asks Piper about PM/UX collaboration, it can reference actual content from my book. Not generic advice — specific passages about role definition and design partnerships.</p><h3 name="cc63" id="cc63" class="graf graf--h3 graf-after--p">The infrastructure reflection</h3><p name="7c42" id="7c42" class="graf graf--p graf-after--h3">This session reinforced something that often gets fast in this era of breaking things and vibing: Sometimes you need to slow down and think architecturally.</p><p name="8f90" id="8f90" class="graf graf--p graf-after--p">Every “quick fix” we considered would have made things worse:</p><ul class="postList"><li name="bd90" id="bd90" class="graf graf--li graf-after--p">Hardcoding paths? Breaks on the other laptop</li><li name="79d5" id="79d5" class="graf graf--li graf-after--li">Skipping initialization? Crashes on startup</li><li name="8731" id="8731" class="graf graf--li graf-after--li">Ignoring version warnings? ChromaDB won’t even load</li></ul><p name="1a81" id="1a81" class="graf graf--p graf-after--li">But taking time to understand the problems — why imports failed, how initialization order matters, what dependency management means — that investment paid off immediately.</p><h3 name="18ca" id="18ca" class="graf graf--h3 graf-after--p">A love letter to boring solutions</h3><p name="6c51" id="6c51" class="graf graf--p graf-after--h3">The final architecture isn’t snazzy:</p><ul class="postList"><li name="284b" id="284b" class="graf graf--li graf-after--p">Standard Python package structure (boring!)</li><li name="4537" id="4537" class="graf graf--li graf-after--li">Lazy initialization pattern (ancient!)</li><li name="5562" id="5562" class="graf graf--li graf-after--li">Pinned dependency versions (conservative!)</li><li name="8ff1" id="8ff1" class="graf graf--li graf-after--li">Systematic debugging (methodical!)</li></ul><p name="56a8" id="56a8" class="graf graf--p graf-after--li graf--trailing">But it works. On both laptops. Every time. And there can be beauty in boring old architecture that just works!</p></div></div></section><section name="b2b1" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="cf3f" id="cf3f" class="graf graf--p graf--leading"><em class="markup--em markup--p-em">Next up in Building Piper Morgan: How we connected Piper’s understanding to actual workflows, and why sometimes the best architecture includes training wheels.</em></p><p name="5456" id="5456" class="graf graf--p graf-after--p graf--trailing"><em class="markup--em markup--p-em">(Got war stories about Python imports or multi-machine development? Share them below. Misery loves company, and I’m collecting tales of dependency hell for therapeutic purposes.)</em></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@mediajunkie" class="p-author h-card">christian crumlish</a> on <a href="https://medium.com/p/4734f6e9f442"><time class="dt-published" datetime="2025-07-04T13:55:29.814Z">July 4, 2025</time></a>.</p><p><a href="https://medium.com/@mediajunkie/knowledge-hierarchies-and-dependency-hell-4734f6e9f442" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 9, 2025.</p></footer></article></body></html>