<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Three Integrations Walk Into a Bar</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Three Integrations Walk Into a Bar</h1>
</header>
<section data-field="subtitle" class="p-summary">
September 28
</section>
<section data-field="body" class="e-content">
<section name="237d" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4eaf" id="4eaf" class="graf graf--h3 graf--leading graf--title">Three Integrations Walk Into a Bar</h3><figure name="2600" id="2600" class="graf graf--figure graf--startsWithDoubleQuote graf-after--h3"><img class="graf-image" data-image-id="1*grvkaMObknRqcbQy0H1CrA.png" data-width="1536" data-height="1024" data-is-featured="true" alt="Three robots, each missing some parts, walk into a robot bar called Foo" src="https://cdn-images-1.medium.com/max/800/1*grvkaMObknRqcbQy0H1CrA.png"><figcaption class="imageCaption">“What’ll it be?”</figcaption></figure><p name="8a06" id="8a06" class="graf graf--p graf-after--figure"><em class="markup--em markup--p-em">September 28</em></p><p name="854c" id="854c" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--p"><span class="graf-dropCap">S</span>unday afternoon at 4:14 PM, I opened my laptop expecting a straightforward router completion task. The gameplan looked clean: finish three integration routers (Slack, Notion, Calendar), apply the patterns we’d proven with GitHub on Saturday, maybe six hours of systematic work.</p><p name="7b98" id="7b98" class="graf graf--p graf-after--p">By midnight, we’d completed all three routers. But the path there involved discovering that every single assumption in the gameplan was wrong, that each integration existed in a completely different state, and that “reality check before assumptions” isn’t just methodology theater — it’s how you avoid building the wrong thing efficiently.</p><p name="0737" id="0737" class="graf graf--p graf-after--p">This is the story of what happens when you actually look before you leap, even when you think you already know what you’ll find.</p><h3 name="d187" id="d187" class="graf graf--h3 graf-after--p">The gameplan that wasn’t</h3><p name="c6a0" id="c6a0" class="graf graf--p graf-after--h3">The Chief Architect’s initial gameplan made perfect sense based on GitHub issue #199’s description: “Integration routers 14–20% complete.” We’d just finished the GitHub router Saturday night — 121% complete with systematic verification. Apply the same pattern to three more routers. Simple multiplication.</p><p name="11d7" id="11d7" class="graf graf--p graf-after--p">The gameplan laid out five parts:</p><ul class="postList"><li name="caf2" id="caf2" class="graf graf--li graf-after--p">Phase −1: Infrastructure reality check</li><li name="fc2a" id="fc2a" class="graf graf--li graf-after--li">Phase 0: Comprehensive router audit</li><li name="3f41" id="3f41" class="graf graf--li graf-after--li">Phases 1–3: Router completion for Slack, Notion, Calendar</li><li name="a2f5" id="a2f5" class="graf graf--li graf-after--li">Phases 4–5: Service migration and testing</li><li name="7255" id="7255" class="graf graf--li graf-after--li">Phase 6: Documentation and locking</li></ul><p name="67d0" id="67d0" class="graf graf--p graf-after--li">But then I asked six questions that changed everything:</p><ol class="postList"><li name="f7da" id="f7da" class="graf graf--li graf-after--p">Did I review the gameplan template first? No.</li><li name="9408" id="9408" class="graf graf--li graf-after--li">Do we need Phase −1? Perhaps.</li><li name="0d07" id="0d07" class="graf graf--li graf-after--li">Did I review the issue description? No.</li><li name="fc31" id="fc31" class="graf graf--li graf-after--li">Are those bash examples verified or guesses? Guesses.</li><li name="f7e5" id="f7e5" class="graf graf--li graf-after--li">Am I conveying necessary context? Incomplete.</li><li name="9695" id="9695" class="graf graf--li graf-after--li">Are my assumptions grounded in reality? Partial.</li></ol><p name="7f0d" id="7f0d" class="graf graf--p graf--startsWithDoubleQuote graf-after--li">“We need to be more rigorous,” I told the Lead Developer. “Not wing it.”</p><p name="0e6b" id="0e6b" class="graf graf--p graf-after--p">Phase −1 exists for exactly this reason: to verify infrastructure matches your assumptions before you build on top of them. (Also, so I stop and actually read the plan instead of passing it along passively and then griping about wrong assumptions.)</p><p name="67cd" id="67cd" class="graf graf--p graf-after--p">We added it to the gameplan and deployed the Code agent to investigate.</p><p name="afd7" id="afd7" class="graf graf--p graf-after--p">What came back was nothing like what we expected.</p><h3 name="96c5" id="96c5" class="graf graf--h3 graf-after--p">Integration #1: The one that was ready</h3><p name="5624" id="5624" class="graf graf--p graf-after--h3">Slack looked straightforward at first. The Code agent found:</p><ul class="postList"><li name="9d5f" id="9d5f" class="graf graf--li graf-after--p">Complete directory at <code class="markup--code markup--li-code">services/integrations/slack/</code></li><li name="1545" id="1545" class="graf graf--li graf-after--li">Sophisticated spatial intelligence system (6 files, 20+ components)</li><li name="7c30" id="7c30" class="graf graf--li graf-after--li">SlackClient with core methods</li><li name="7113" id="7113" class="graf graf--li graf-after--li">Pattern matching GitHub’s successful implementation</li></ul><p name="fdb9" id="fdb9" class="graf graf--p graf-after--li">Status: <strong class="markup--strong markup--p-strong">GREEN</strong> — Ready for router work.</p><p name="4df4" id="4df4" class="graf graf--p graf-after--p">This was exactly what we expected. One down, two to go.</p><h3 name="c74e" id="c74e" class="graf graf--h3 graf-after--p">Integration #2: The mysterious adapter</h3><p name="5eea" id="5eea" class="graf graf--p graf-after--h3">Notion was different. The Code agent found:</p><ul class="postList"><li name="56c2" id="56c2" class="graf graf--li graf-after--p">MCP adapter at <code class="markup--code markup--li-code">services/integrations/mcp/notion_adapter.py</code></li><li name="ef52" id="ef52" class="graf graf--li graf-after--li">637 lines of implementation</li><li name="c3d1" id="c3d1" class="graf graf--li graf-after--li">But… wait, MCP pattern? That’s not what the gameplan assumed</li></ul><p name="8b54" id="8b54" class="graf graf--p graf-after--li">The original scope expected traditional client/agent patterns like GitHub and Slack. But Notion used Model Context Protocol adapters — a different architectural approach entirely. Not incomplete. Just different.</p><p name="e7c5" id="e7c5" class="graf graf--p graf-after--p">I knew we had started layering inMCP support before we started adding spatial intelligence, so it looked like different integrations had each inherited one of these partial solutions.</p><p name="3835" id="3835" class="graf graf--p graf-after--p">The question became: should we wrap the MCP adapter with a router, or acknowledge it as a different pattern? The architecture was sound, just unexpected.</p><p name="2b37" id="2b37" class="graf graf--p graf-after--p">Status: <strong class="markup--strong markup--p-strong">YELLOW</strong> — Architecture decision needed.</p><h3 name="9423" id="9423" class="graf graf--h3 graf-after--p">Integration #3: The one that didn’t exist</h3><p name="19e4" id="19e4" class="graf graf--p graf-after--h3">Calendar revealed the real problem. The Code agent searched everywhere:</p><ul class="postList"><li name="7f95" id="7f95" class="graf graf--li graf-after--p">No <code class="markup--code markup--li-code">services/integrations/calendar/</code> directory</li><li name="aaeb" id="aaeb" class="graf graf--li graf-after--li">No calendar client or agent</li><li name="9505" id="9505" class="graf graf--li graf-after--li">No spatial calendar files</li><li name="fa26" id="fa26" class="graf graf--li graf-after--li">Nothing matching the expected pattern</li></ul><p name="4cd3" id="4cd3" class="graf graf--p graf-after--li">Status: <strong class="markup--strong markup--p-strong">RED</strong> — Integration appears completely missing.</p><p name="bec4" id="bec4" class="graf graf--p graf-after--p">The scope estimate jumped immediately. If we had to build an entire Calendar integration from scratch, we weren’t looking at 16 hours of router work. We were looking at potentially 40+ hours including OAuth implementation, API integration, spatial adapter creation, and everything else.</p><p name="c11f" id="c11f" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Note: I happened to know we had successfully integrated Google Calendar a while back, but clearly we had done it outside of the expected channels, to the extent that my agent was reporting not being able to find it.</em></p><p name="001c" id="001c" class="graf graf--p graf-after--p">At 6:43 PM, I reported back to the Chief Architect: our three “similar routers” were actually three completely different architectural challenges. The gameplan assumptions had collided with reality.</p><h3 name="e73e" id="e73e" class="graf graf--h3 graf-after--p">The discovery that changed everything</h3><p name="80bf" id="80bf" class="graf graf--p graf-after--h3">So I disputed the claim about the Calendar integration being missing entirely, reminding the team:</p><p name="cdd8" id="cdd8" class="graf graf--p graf--startsWithDoubleQuote graf-after--p">“We have OAuth working (somewhere). I personally verified the Calendar connection works. The integration was built September 19–22.”</p><p name="3242" id="3242" class="graf graf--p graf-after--p">So… if the Calendar integration existed and worked, where was it?</p><p name="808b" id="808b" class="graf graf--p graf-after--p">Phase −1B launched: find the Calendar integration that OAuth proved must exist somewhere. The Code agent searched git history for those dates, checked every possible location, looked for any OAuth-related code.</p><p name="c7f7" id="c7f7" class="graf graf--p graf-after--p">At 8:35 PM, the discovery came through:</p><p name="6c93" id="6c93" class="graf graf--p graf-after--p">Complete <strong class="markup--strong markup--p-strong">Google Calendar integration</strong> found at<strong class="markup--strong markup--p-strong"> </strong><code class="markup--code markup--p-code">services/mcp/consumer/google_calendar_adapter.py</code></p><p name="75e3" id="75e3" class="graf graf--p graf-after--p">Not missing. Not incomplete. Actually 85% complete with:</p><ul class="postList"><li name="be6f" id="be6f" class="graf graf--li graf-after--p">OAuth 2.0 working since September 6</li><li name="95f1" id="95f1" class="graf graf--li graf-after--li">Full feature set (events, meetings, free time)</li><li name="6624" id="6624" class="graf graf--li graf-after--li">Spatial intelligence via BaseSpatialAdapter</li><li name="c994" id="c994" class="graf graf--li graf-after--li">Circuit breaker resilience pattern</li><li name="9791" id="9791" class="graf graf--li graf-after--li">CLI testing interface</li><li name="4114" id="4114" class="graf graf--li graf-after--li">499 lines of solid implementation</li></ul><p name="2e54" id="2e54" class="graf graf--p graf-after--li">The Calendar integration wasn’t missing. It was just somewhere unexpected, using the MCP pattern we’d just discovered with Notion.</p><h3 name="1f1d" id="1f1d" class="graf graf--h3 graf-after--p">When assumptions meet architecture</h3><p name="c3a4" id="c3a4" class="graf graf--p graf-after--h3">At 8:36 PM, the picture finally clarified:</p><p name="a0f9" id="a0f9" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">All three integrations use MCP pattern.</strong></p><p name="3fad" id="3fad" class="graf graf--p graf-after--p">Not three traditional routers like GitHub. Three lightweight router wrappers around existing MCP adapters:</p><ul class="postList"><li name="4b2f" id="4b2f" class="graf graf--li graf-after--p">Slack: Has traditional spatial pattern, needs router wrapper</li><li name="019f" id="019f" class="graf graf--li graf-after--li">Notion: MCP adapter exists, needs router wrapper</li><li name="8ef8" id="8ef8" class="graf graf--li graf-after--li">Calendar: MCP adapter 85% complete, needs router wrapper</li></ul><p name="a7a3" id="a7a3" class="graf graf--p graf-after--li">The MCP integration had been more complete than we had realized!</p><p name="6697" id="6697" class="graf graf--p graf-after--p">The original 32–56 hour estimate collapsed to about 12 hours. We weren’t building routers from scratch. We were wrapping proven adapters with the router pattern for QueryRouter access.</p><p name="99dc" id="99dc" class="graf graf--p graf-after--p">The gameplan got its third major revision. But this time, the revision made the work simpler rather than more complex. Understanding actual architecture beats assuming expected patterns.</p><h3 name="7477" id="7477" class="graf graf--h3 graf-after--p">The evening sprint</h3><p name="ed43" id="ed43" class="graf graf--p graf-after--h3">With clarity came momentum. Between 8:48 PM and midnight, systematic work produced:</p><p name="134e" id="134e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Phase 0</strong>: MCP architecture investigation complete</p><ul class="postList"><li name="cc19" id="cc19" class="graf graf--li graf-after--p">Pattern documented</li><li name="2dcf" id="2dcf" class="graf graf--li graf-after--li">Adapter inventory verified</li><li name="f59c" id="f59c" class="graf graf--li graf-after--li">Design approach confirmed</li></ul><p name="9d10" id="9d10" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Phase 1</strong>: CalendarIntegrationRouter complete</p><ul class="postList"><li name="e533" id="e533" class="graf graf--li graf-after--p">8 methods implemented</li><li name="8e29" id="8e29" class="graf graf--li graf-after--li">Feature flag control added</li><li name="d35b" id="d35b" class="graf graf--li graf-after--li">285 lines, following proven pattern</li></ul><p name="e26f" id="e26f" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Phase 2</strong>: NotionIntegrationRouter complete</p><ul class="postList"><li name="9758" id="9758" class="graf graf--li graf-after--p">23 methods implemented</li><li name="0205" id="0205" class="graf graf--li graf-after--li">Full spatial interface</li><li name="5fd3" id="5fd3" class="graf graf--li graf-after--li">637 lines, comprehensive coverage</li></ul><p name="72d0" id="72d0" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Phase 3</strong>: SlackIntegrationRouter complete</p><ul class="postList"><li name="6266" id="6266" class="graf graf--li graf-after--p">20 methods implemented</li><li name="9c8e" id="9c8e" class="graf graf--li graf-after--li">Dual-component architecture (SlackSpatialAdapter + SlackClient)</li><li name="532c" id="532c" class="graf graf--li graf-after--li">850+ lines, most complex but cleanest</li></ul><p name="d4cd" id="d4cd" class="graf graf--p graf-after--li">By 11:23 PM, all three routers existed, tested, and verified. Cursor had independently cross-validated each one. The infrastructure was ready.</p><p name="5a29" id="5a29" class="graf graf--p graf-after--p">But implementation and migration are different challenges. Six services still imported adapters directly, bypassing the routers entirely. Monday morning would bring the real test: could these routers actually replace the direct imports without breaking anything?</p><h3 name="7f83" id="7f83" class="graf graf--h3 graf-after--p">The layers of discovery</h3><p name="abf1" id="abf1" class="graf graf--p graf-after--h3">Sunday demonstrated something crucial about complex systems work: assumptions fail in layers.</p><p name="2b87" id="2b87" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Layer 1</strong>: “Three similar routers” → Actually three different architectures</p><p name="264f" id="264f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Layer 2</strong>: “14–20% complete” → States ranging from ready to seemingly missing</p><p name="1d24" id="1d24" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Layer 3</strong>: “Need to build” → Actually need to wrap existing work</p><p name="f812" id="f812" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Layer 4</strong>: “Missing integration” → Hidden in unexpected location</p><p name="3f68" id="3f68" class="graf graf--p graf-after--p">Each discovery changed the scope, the approach, the estimate. But each also brought us closer to reality. Phase −1 didn’t delay the work — it prevented us from building the wrong solution efficiently.</p><p name="0056" id="0056" class="graf graf--p graf-after--p">The methodology held. When the gameplan met reality, we revised the gameplan rather than forcing reality to match our assumptions. Investigation revealed architecture. Architecture informed approach. Approach determined scope.</p><h3 name="23e4" id="23e4" class="graf graf--h3 graf-after--p">The questions that matter</h3><p name="09bc" id="09bc" class="graf graf--p graf-after--h3">Sunday’s success came from asking simple questions before assuming we knew the answers:</p><ul class="postList"><li name="1d8d" id="1d8d" class="graf graf--li graf-after--p">Where is this code actually located?</li><li name="9c2c" id="9c2c" class="graf graf--li graf-after--li">What pattern does it actually use?</li><li name="f223" id="f223" class="graf graf--li graf-after--li">What state is it actually in?</li><li name="5b7d" id="5b7d" class="graf graf--li graf-after--li">What do we actually need to build?</li></ul><p name="e975" id="e975" class="graf graf--p graf-after--li">Not “what should be there” but “what is there.” Not “how should it work” but “how does it work.” The gap between expectation and reality is where projects go wrong.</p><p name="8347" id="8347" class="graf graf--p graf-after--p">By midnight Sunday, we had three complete routers, ready for Monday’s migration work. The investigation had taken longer than expected. The discoveries had revised the scope three times. But we’d built the right thing.</p><p name="4595" id="4595" class="graf graf--p graf-after--p graf--trailing">Monday morning would test whether we’d built it right.</p></div></div></section><section name="ba05" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="f5b3" id="f5b3" class="graf graf--p graf--leading">Next on Building Piper Morgan: Solving the 80% Problem, in which we grapple with this frustrating tendency of coding agents to declare success when nearly done.</p><p name="60e5" id="60e5" class="graf graf--p graf-after--p graf--trailing">Have you ever sat down to do some work and found out after refreshing your memory that it was mostly already accomplished and just needed finishing? Are you, like me, one of those people who leaves cupboard doors ajar? What is wrong with us?</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@mediajunkie" class="p-author h-card">christian crumlish</a> on <a href="https://medium.com/p/f748ce4c2db1"><time class="dt-published" datetime="2025-10-06T13:00:58.818Z">October 6, 2025</time></a>.</p><p><a href="https://medium.com/@mediajunkie/three-integrations-walk-into-a-bar-f748ce4c2db1" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 9, 2025.</p></footer></article></body></html>