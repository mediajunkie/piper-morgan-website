<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The AI Detective Squad: When Three Agents Solve One Mystery</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">The AI Detective Squad: When Three Agents Solve One Mystery</h1>
</header>
<section data-field="subtitle" class="p-summary">
July 12
</section>
<section data-field="body" class="e-content">
<section name="1f88" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="6f89" id="6f89" class="graf graf--h3 graf--leading graf--title">The AI Detective Squad: When Three Agents Solve One Mystery</h3><figure name="5014" id="5014" class="graf graf--figure graf--startsWithDoubleQuote graf-after--h3"><img class="graf-image" data-image-id="1*W5miUi3zliJdQjXFQ9Nl9g.png" data-width="1536" data-height="1024" data-is-featured="true" alt="Three robot detectives work on a mystery" src="https://cdn-images-1.medium.com/max/800/1*W5miUi3zliJdQjXFQ9Nl9g.png"><figcaption class="imageCaption">“It’s all adding up”</figcaption></figure><p name="1bcf" id="1bcf" class="graf graf--p graf-after--figure"><em class="markup--em markup--p-em">July 12</em></p><p name="0cda" id="0cda" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--p"><span class="graf-dropCap">S</span>ometimes the most interesting bugs aren’t bugs at all — they’re architectural mysteries that reveal how well (or poorly) you’ve designed your system. Yesterday’s “orchestration false positive” investigation turned into a masterclass in domain-driven design, solved by deploying three different AI agents like a detective squad.</p><p name="7848" id="7848" class="graf graf--p graf-after--p">The mystery: Why was the UI reporting success when workflows were clearly failing?</p><h3 name="3155" id="3155" class="graf graf--h3 graf-after--p">The false positive that wasn’t</h3><p name="be20" id="be20" class="graf graf--p graf-after--h3">The problem seemed straightforward. Users would submit requests like “Users are complaining that the mobile app crashes when they upload large photos” and the UI would respond:</p><ol class="postList"><li name="4e37" id="4e37" class="graf graf--li graf--startsWithDoubleQuote graf-after--p">“I understand you want to investigate this issue. I’ve started a workflow to handle this.” ✓</li><li name="c2f3" id="c2f3" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">[Long pause]</em></li><li name="1e56" id="1e56" class="graf graf--li graf--startsWithDoubleQuote graf-after--li">“I’ve completed the analysis but couldn’t generate a summary.” ✗</li></ol><p name="2fdb" id="2fdb" class="graf graf--p graf-after--li">This looked like a classic orchestration failure. The system was marking workflows complete despite task failures, creating false positives that would erode user trust.</p><p name="0d4e" id="0d4e" class="graf graf--p graf-after--p">Or so we thought.</p><h3 name="3a48" id="3a48" class="graf graf--h3 graf-after--p">Deploying the detective squad</h3><p name="374c" id="374c" class="graf graf--p graf-after--h3">Rather than diving in myself, I decided to try something different: deploy multiple AI agents with different investigation approaches and see what each discovered.</p><p name="58cf" id="58cf" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Opus (Principal Technical Architect)</strong>: Strategic oversight and hypothesis formation</p><p name="faa8" id="faa8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Claude Code</strong>: Rapid file navigation and pattern matching</p><p name="c352" id="c352" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Cursor Assistant</strong>: Systematic analysis and architectural investigation</p><p name="cb2d" id="cb2d" class="graf graf--p graf-after--p">Each got different instructions based on their strengths. Think of it like assigning a tech lead, a senior engineer, and a platform architect to the same bug.</p><h3 name="7b95" id="7b95" class="graf graf--h3 graf-after--p">The investigation unfolds</h3><h4 name="16e9" id="16e9" class="graf graf--h4 graf-after--h3">Claude Code’s discovery (the fast tracker)</h4><p name="4d65" id="4d65" class="graf graf--p graf-after--h4">Claude Code immediately started grep-ing through the codebase looking for success/failure propagation patterns. Within minutes, it found something interesting:</p><p name="70fc" id="70fc" class="graf graf--p graf-after--p">The SUMMARIZE task handler was storing results differently than other analysis tasks:</p><ul class="postList"><li name="c35e" id="c35e" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">SUMMARIZE</strong>: <code class="markup--code markup--li-code">output_data={&quot;message&quot;: response, ...}</code></li><li name="3a09" id="3a09" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">ANALYZE_FILE</strong>: <code class="markup--code markup--li-code">output_data={&quot;analysis&quot;: {&quot;summary&quot;: &quot;...&quot;, ...}}</code></li></ul><p name="0c0a" id="0c0a" class="graf graf--p graf-after--li">But this felt like a symptom, not a root cause.</p><h4 name="43f3" id="43f3" class="graf graf--h4 graf-after--p">Cursor Assistant’s systematic analysis (the methodical one)</h4><p name="377e" id="377e" class="graf graf--p graf-after--h4">Cursor took a different approach: mapping the entire workflow state machine and tracing how task failures should propagate to workflow status. The investigation revealed:</p><ul class="postList"><li name="2dd2" id="2dd2" class="graf graf--li graf-after--p">Workflow status management was working correctly</li><li name="8d93" id="8d93" class="graf graf--li graf-after--li">Task failure propagation was implemented properly</li><li name="c19c" id="c19c" class="graf graf--li graf-after--li">The UI polling logic was sound</li></ul><p name="7f05" id="7f05" class="graf graf--p graf-after--li">So if everything was architected correctly, why the false positive?</p><h3 name="809b" id="809b" class="graf graf--h3 graf-after--p">The breakthrough moment</h3><p name="f3b4" id="f3b4" class="graf graf--p graf-after--h3">Then we tried actually testing the bug scenario again. And something unexpected happened:</p><p name="3ee8" id="3ee8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The workflow completed successfully.</strong></p><p name="32c7" id="32c7" class="graf graf--p graf-after--p">No rate limits. No failures. A complete 2,429-character analysis generated and stored properly. The “couldn’t generate a summary” message was… wrong.</p><p name="98c5" id="98c5" class="graf graf--p graf-after--p">That’s when Opus had the insight: this wasn’t an orchestration problem. This was a <strong class="markup--strong markup--p-strong">domain model‒consistency violation</strong>.</p><h3 name="5cb2" id="5cb2" class="graf graf--h3 graf-after--p">The domain-driven design revelation</h3><p name="0b9d" id="0b9d" class="graf graf--p graf-after--h3">Here’s what we discovered: The UI was correctly expecting analysis results to be structured as <code class="markup--code markup--p-code">workflow.result.data[&quot;analysis&quot;][&quot;summary&quot;]</code>. This was the established domain contract, followed consistently by the ANALYZE_FILE handler.</p><p name="0d38" id="0d38" class="graf graf--p graf-after--p">But the SUMMARIZE handler was violating this contract by storing results as <code class="markup--code markup--p-code">{&quot;message&quot;: response}</code> instead of following the established pattern.</p><p name="2774" id="2774" class="graf graf--p graf-after--p">The “bug” wasn’t that the system was reporting false positives. The bug was that one task handler wasn’t following the domain model that all the others used.</p><p name="3e4b" id="3e4b" class="graf graf--p graf-after--p">This is exactly why domain-driven design matters. When you have clear, consistent contracts, violations become obvious and easy to fix.</p><h3 name="d60f" id="d60f" class="graf graf--h3 graf-after--p">The fix and the victory</h3><p name="7e0b" id="7e0b" class="graf graf--p graf-after--h3">The architecturally correct solution was simple: update the SUMMARIZE handler to follow the established domain pattern:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="cceb" id="cceb" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">output_data = {<br />    <span class="hljs-string">&quot;analysis&quot;</span>: {<br />        <span class="hljs-string">&quot;summary&quot;</span>: response,<br />        <span class="hljs-string">&quot;analysis_type&quot;</span>: <span class="hljs-string">&quot;general_analysis&quot;</span>, <br />        <span class="hljs-string">&quot;original_request&quot;</span>: original_message,<br />    }<br />}</span></pre><p name="b45e" id="b45e" class="graf graf--p graf-after--pre">Instead of the contract-violating:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="cf5b" id="cf5b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">output_data = {<span class="hljs-string">&quot;message&quot;</span>: response}</span></pre><p name="ec34" id="ec34" class="graf graf--p graf-after--pre">Suddenly the UI could find the summary where it expected it, and the mysterious “couldn’t generate a summary” message disappeared.</p><h3 name="820c" id="820c" class="graf graf--h3 graf-after--p">What this taught us about AI collaboration</h3><p name="ceeb" id="ceeb" class="graf graf--p graf-after--h3">The three-AI approach revealed something important about different types of intelligence:</p><p name="be1b" id="be1b" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Pattern matching</strong> (Claude Code) found the immediate discrepancy quickly but couldn’t assess architectural significance.</p><p name="170e" id="170e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Systematic analysis</strong> (Cursor) validated that the architecture was sound but couldn’t identify the specific violation.</p><p name="1411" id="1411" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Strategic reasoning</strong> (Opus) connected the technical details to architectural principles and recognized the domain model violation.</p><p name="94bd" id="94bd" class="graf graf--p graf-after--p">Each AI brought different cognitive strengths to the same problem. The combination was more powerful than any individual approach.</p><p name="464e" id="464e" class="graf graf--p graf-after--p">Not to anthropomorphize, but this is eerily similar to working with real people with their own panoply of strengths, growth areas, and stuff they really just hate doing or aren’t good at.</p><h3 name="67f9" id="67f9" class="graf graf--h3 graf-after--p">The meta-lesson about debugging complex systems</h3><p name="559f" id="559f" class="graf graf--p graf-after--h3">This investigation reinforced something I’ve learned over years of building systems: the most interesting problems aren’t usually what they appear to be.</p><p name="b09c" id="b09c" class="graf graf--p graf-after--p">What looked like an orchestration failure was actually a domain-modeling inconsistency. What seemed like a technical bug was actually an architectural-pattern violation. What appeared to be AI coordination failure was actually a successful discovery of emergent system behavior.</p><p name="43c4" id="43c4" class="graf graf--p graf-after--p">The debugging process was as valuable as the fix. We validated that:</p><ul class="postList"><li name="b14a" id="b14a" class="graf graf--li graf-after--p">✅ The orchestration engine correctly propagates failures</li><li name="aea7" id="aea7" class="graf graf--li graf-after--li">✅ The workflow state management is sound</li><li name="d087" id="d087" class="graf graf--li graf-after--li">✅ The UI polling and status interpretation work properly</li><li name="e65c" id="e65c" class="graf graf--li graf-after--li">✅ The domain model contracts are being followed (mostly)</li><li name="99bf" id="99bf" class="graf graf--li graf-after--li">✅ The architectural patterns catch violations when you look for them</li></ul><h3 name="401e" id="401e" class="graf graf--h3 graf-after--li">The broader implications</h3><p name="3c28" id="3c28" class="graf graf--p graf-after--h3">This investigation revealed that Piper Morgan’s architecture is more robust than I thought. The domain-driven design principles we built in are working — they made the contract violation obvious and the fix straightforward.</p><p name="f9b3" id="f9b3" class="graf graf--p graf-after--p">But it also highlighted the importance of consistency reviews. When you’re building with multiple AI assistants, each implementing different components, it’s easy for domain model violations to creep in. Regular architectural review sessions are essential.</p><h3 name="c172" id="c172" class="graf graf--h3 graf-after--p">The AI debugging workflow that emerged</h3><p name="16b7" id="16b7" class="graf graf--p graf-after--h3">The July 12 investigation suggests a pattern for complex debugging with AI assistance:</p><ol class="postList"><li name="12ff" id="12ff" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Strategic AI</strong> (Opus) formulates hypotheses and provides architectural context</li><li name="ded3" id="ded3" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Tactical AIs</strong> (Code, Cursor) execute different investigation approaches in parallel</li><li name="7437" id="7437" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Human</strong> synthesizes findings and makes architectural decisions</li><li name="373f" id="373f" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">All parties</strong> collaborate on fixes that maintain domain consistency</li></ol><p name="6327" id="6327" class="graf graf--p graf-after--li">This is different from traditional pair programming or even AI-assisted coding. It’s more like having a entire debugging team available instantly.</p><h3 name="c4f8" id="c4f8" class="graf graf--h3 graf-after--p">Looking forward</h3><p name="8931" id="8931" class="graf graf--p graf-after--h3">The “orchestration false positive” turned out to be a domain model consistency check in disguise. The investigation validated our architectural choices while revealing areas for improvement.</p><p name="8753" id="8753" class="graf graf--p graf-after--p">More importantly, it demonstrated that debugging complex systems with AI assistance isn’t just about fixing bugs — it’s about validating architectural decisions and discovering emergent system behaviors.</p><p name="2976" id="2976" class="graf graf--p graf-after--p graf--trailing">The detective squad approach is now part of our toolkit for investigating complex issues. Different AIs, different perspectives, better solutions.</p></div></div></section><section name="0df4" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="b4f8" id="b4f8" class="graf graf--p graf--leading"><em class="markup--em markup--p-em">Next in Building Piper Morgan: How we went from 98% test failures to 87% success (and why breaking tests can be a good thing).</em></p><p name="81c0" id="81c0" class="graf graf--p graf-after--p graf--trailing"><em class="markup--em markup--p-em">Also, why are the most frustrating bugs always in the last place you look? Just asking.</em></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@mediajunkie" class="p-author h-card">christian crumlish</a> on <a href="https://medium.com/p/987eb4c5cc42"><time class="dt-published" datetime="2025-08-01T14:33:21.249Z">August 1, 2025</time></a>.</p><p><a href="https://medium.com/@mediajunkie/the-ai-detective-squad-when-three-agents-solve-one-mystery-987eb4c5cc42" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 9, 2025.</p></footer></article></body></html>