1:"$Sreact.fragment"
8:I[8393,[],""]
:HL["/_next/static/css/f9342e94655f11e9.css","style"]
2:T1313,
            :root{--primary-teal:#2DD4BF;--primary-teal-text:#0D9488;--text-dark:#1F2937;--text-light:#6B7280;--background:#FFFFFF;--surface:#F9FAFB}
            .dark{--text-dark:#F1F5F9;--text-light:#94A3B8;--background:#0F172A;--surface:#1E293B}
            @font-face{font-family:'Inter';src:url('/fonts/inter-latin.woff2') format('woff2');font-weight:100 900;font-style:normal;font-display:swap;unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
            *{box-sizing:border-box}
            html{scroll-behavior:smooth;font-size:16px;margin:0;padding:0;border:none;outline:none}
            body{background:var(--background);color:var(--text-dark);font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell',sans-serif;line-height:1.6;margin:0;padding:0;border:none;outline:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
            nav{border:none !important;outline:none !important}
            h1,h2,h3,h4,h5,h6{font-family:'Hoss Round','Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif}
            p,span{max-width:75ch;line-height:1.7}
            .text-content div{max-width:75ch;line-height:1.7}
            .text-content{max-width:65ch}
            @media (max-width:640px){
              h1{font-size:1.75rem;line-height:1.2}
              h2{font-size:1.25rem;line-height:1.3}
              h3{font-size:1.1rem;line-height:1.4}
              h4{font-size:1rem;line-height:1.4}
            }
            @media (min-width:641px) and (max-width:768px){
              h1{font-size:2rem;line-height:1.2}
              h2{font-size:1.5rem;line-height:1.3}
              h3{font-size:1.25rem;line-height:1.4}
            }
            @media (prefers-reduced-motion: reduce){
              *{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important}
            }
            a:hover{color:#0D9488;transition:color 0.2s ease}
            .hover-lift:hover{transform:translateY(-2px);transition:transform 0.2s ease}
            button:focus,a:focus{outline:2px solid #2DD4BF;outline-offset:2px;border-radius:4px}
            .skip-to-content{position:absolute;top:-100px;left:0;z-index:999;padding:8px 16px;background:#1F2937;color:white;text-decoration:none;border-radius:0 0 4px 0;transition:top 0.3s}
            .skip-to-content:focus{top:0;outline:2px solid #2DD4BF;outline-offset:2px}
            .section-spacing{margin-bottom:4rem}
            .component-spacing{margin-bottom:1.5rem}
            .micro-spacing{margin-bottom:0.5rem}
            @media (min-width:768px){
              .section-spacing{margin-bottom:6rem}
              .component-spacing{margin-bottom:2rem}
            }
            .site-container{width:100%;max-width:1200px;margin-left:auto;margin-right:auto;padding-left:1rem;padding-right:1rem}
            @media (min-width:640px){.site-container{padding-left:1.5rem;padding-right:1.5rem}}
            @media (min-width:768px){.site-container{padding-left:2rem;padding-right:2rem}}
            @media (min-width:1024px){.site-container{max-width:1200px}}
            @media (min-width:1200px){.site-container{max-width:1200px}}
            .section-padding{padding-top:4rem;padding-bottom:4rem}
            @media (min-width:768px){.section-padding{padding-top:5rem;padding-bottom:5rem}}
            .mx-auto{margin-left:auto;margin-right:auto}
            .max-w-4xl{max-width:56rem}
            .pt-16{padding-top:4rem}
            .pb-8{padding-bottom:2rem}
            .px-4{padding-left:1rem;padding-right:1rem}
            .mb-6{margin-bottom:1.5rem}
            .mb-8{margin-bottom:2rem}
            .text-left{text-align:left}
            .text-center{text-align:center}
            .text-primary-teal-text{color:#0F766E}
            .text-text-dark{color:#1F2937}
            .text-text-light{color:#6B7280}
            .font-bold{font-weight:700}
            .text-4xl{font-size:2.25rem;line-height:2.5rem}
            .text-5xl{font-size:3rem;line-height:1}
            .text-6xl{font-size:3.75rem;line-height:1}
            .text-lg{font-size:1.125rem;line-height:1.75rem}
            .text-xl{font-size:1.25rem;line-height:1.75rem}
            .leading-tight{line-height:1.25}
            .leading-relaxed{line-height:1.625}
            .min-h-screen{min-height:100vh}
            @media (min-width:768px){
              .md\:pt-24{padding-top:6rem}
              .md\:pb-12{padding-bottom:3rem}
              .md\:text-5xl{font-size:3rem;line-height:1}
              .md\:text-xl{font-size:1.25rem;line-height:1.75rem}
            }
            @media (min-width:1024px){
              .lg\:text-6xl{font-size:3.75rem;line-height:1}
            }
          0:{"P":null,"b":"JOW70PBhY5FKXXQme2Gbw","p":"","c":["","blog","integration-reveals-all",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","integration-reveals-all","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9342e94655f11e9.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"font-inter","children":[["$","head",null,{"children":[["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\n              (function() {\n                const theme = localStorage.getItem('theme') ||\n                  (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n                if (theme === 'dark') {\n                  document.documentElement.classList.add('dark');\n                  document.body.classList.add('dark');\n                }\n              })();\n            "}}],["$","link",null,{"rel":"dns-prefetch","href":"//pipermorgan.ai"}],["$","link",null,{"rel":"preconnect","href":"https://pipermorgan.ai"}],["$","link",null,{"rel":"preload","as":"image","href":"/assets/pm-logo.png"}],["$","link",null,{"rel":"preload","href":"/fonts/inter-latin.woff2","as":"font","type":"font/woff2","crossOrigin":"anonymous"}],["$","link",null,{"rel":"preload","href":"/fonts/HossRound-Regular.woff2","as":"font","type":"font/woff2","crossOrigin":"anonymous"}],["$","style",null,{"dangerouslySetInnerHTML":{"__html":"$2"}}]]}],"$L3"]}]]}],{"children":["blog","$L4",{"children":[["slug","integration-reveals-all","d"],"$L5",{"children":["__PAGE__","$L6",{},null,false]},null,false]},null,false]},null,false],"$L7",false]],"m":"$undefined","G":["$8",[]],"s":false,"S":true}
9:I[9119,["874","static/chunks/874-668c89038fa04eb8.js","212","static/chunks/212-369ef96a260e510f.js","177","static/chunks/app/layout-9ed54623e803ece8.js"],"ClientLayout"]
a:I[7555,[],""]
b:I[1295,[],""]
c:I[6874,["874","static/chunks/874-668c89038fa04eb8.js","212","static/chunks/212-369ef96a260e510f.js","144","static/chunks/144-1b443e029a921717.js","674","static/chunks/674-67aeaafc13e49754.js","831","static/chunks/app/blog/page-666765c672eae567.js"],""]
10:I[9665,[],"OutletBoundary"]
12:I[4911,[],"AsyncMetadataOutlet"]
14:I[9665,[],"ViewportBoundary"]
16:I[9665,[],"MetadataBoundary"]
17:"$Sreact.suspense"
3:["$","body",null,{"className":"font-sans antialiased","children":[["$","$L9",null,{"children":["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"min-h-screen","children":["$","div",null,{"className":"site-container max-w-4xl pt-16 md:pt-24 pb-8 md:pb-12 text-center","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"text-8xl md:text-9xl font-bold text-primary-teal-text mb-4","children":"404"}],["$","h2",null,{"className":"text-3xl md:text-4xl font-semibold text-text-dark mb-4","children":"Page Not Found"}],["$","p",null,{"className":"text-xl text-text-light leading-relaxed max-w-2xl mx-auto","children":"Looks like this page got lost in the AI training data. Don't worry ‚Äì even the best algorithms make mistakes sometimes."}]]}],["$","div",null,{"className":"mb-12","children":[["$","h3",null,{"className":"text-xl font-semibold text-text-dark mb-6","children":"Where would you like to go instead?"}],["$","div",null,{"className":"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto","children":[["$","div",null,{"className":"space-y-4","children":[["$","$Lc",null,{"href":"/","className":"block p-4 bg-surface rounded-card hover:bg-gray-50 transition-colors group","children":[["$","h4",null,{"className":"font-semibold text-text-dark group-hover:text-primary-teal-text","children":"üè† Homepage"}],["$","p",null,{"className":"text-sm text-text-light mt-1","children":"Start from the beginning of our AI PM journey"}]]}],["$","$Lc",null,{"href":"/how-it-works","className":"block p-4 bg-surface rounded-card hover:bg-gray-50 transition-colors group","children":[["$","h4",null,{"className":"font-semibold text-text-dark group-hover:text-primary-teal-text","children":"‚öôÔ∏è How It Works"}],["$","p",null,{"className":"text-sm text-text-light mt-1","children":"Discover our AI-powered product management methodology"}]]}]]}],["$","div",null,{"className":"space-y-4","children":[["$","$Lc",null,{"href":"/what-weve-learned","className":"block p-4 bg-surface rounded-card hover:bg-gray-50 transition-colors group","children":[["$","h4",null,{"className":"font-semibold text-text-dark group-hover:text-primary-teal-text","children":"üí° What We've Learned"}],["$","p",null,{"className":"text-sm text-text-light mt-1","children":"Building-in-public insights and breakthroughs"}]]}],["$","$Lc",null,{"href":"/blog","className":"block p-4 bg-surface rounded-card hover:bg-gray-50 transition-colors group","children":[["$","h4",null,{"className":"font-semibold text-text-dark group-hover:text-primary-teal-text","children":"üìù Journey"}],["$","p",null,{"className":"text-sm text-text-light mt-1","children":"Follow our building-in-public blog posts"}]]}],["$","$Lc",null,{"href":"/get-involved","className":"block p-4 bg-surface rounded-card hover:bg-gray-50 transition-colors group","children":[["$","h4",null,{"className":"font-semibold text-text-dark group-hover:text-primary-teal-text","children":"üöÄ Get Involved"}],["$","p",null,{"className":"text-sm text-text-light mt-1","children":"Join our community and stay updated"}]]}]]}]]}]]}],["$","div",null,{"className":"text-center","children":[["$","p",null,{"className":"text-text-light mb-6","children":"Still can't find what you're looking for?"}],["$","$Lc",null,{"href":"/get-involved","className":"inline-flex items-center justify-center font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none bg-primary-teal text-white hover:bg-teal-600 focus:ring-primary-teal shadow-component hover:shadow-component-hover hover:-translate-y-0.5 hover:scale-105 font-bold text-lg px-8 py-4 text-lg rounded-button","aria-label":"$undefined","children":[false,"Get Help & Stay Updated"]}]]}],["$","div",null,{"className":"mt-12 p-6 bg-gray-50 rounded-card max-w-lg mx-auto","children":["$","p",null,{"className":"text-sm text-text-light italic","children":["üí¨ ","$Ld"," \"Even the most sophisticated neural networks occasionally return null. Let's navigate back to more productive paths together!\""]}]}]]}]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],"$Le"]}]
4:["$","$1","c",{"children":[null,["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
5:["$","$1","c",{"children":[null,["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
6:["$","$1","c",{"children":["$Lf",null,["$","$L10",null,{"children":["$L11",["$","$L12",null,{"promise":"$@13"}]]}]]}]
7:["$","$1","h",{"children":[null,[["$","$L14",null,{"children":"$L15"}],null],["$","$L16",null,{"children":["$","div",null,{"hidden":true,"children":["$","$17",null,{"fallback":null,"children":"$L18"}]}]}]]}]
19:I[9795,["874","static/chunks/874-668c89038fa04eb8.js","212","static/chunks/212-369ef96a260e510f.js","177","static/chunks/app/layout-9ed54623e803ece8.js"],"default"]
d:["$","strong",null,{"children":"Piper Morgan says:"}]
e:["$","$L19",null,{}]
1a:I[7887,["874","static/chunks/874-668c89038fa04eb8.js","953","static/chunks/app/blog/%5Bslug%5D/page-63f1c4c60df8aece.js"],"BlogPostContent"]
1b:T5963,<section name="26e6" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bbf6" id="bbf6" class="graf graf--h3 graf--leading graf--title">Integration Reveals All: How Building File Analysis Exposed Hidden Architecture</h3><p name="054e" id="054e" class="graf graf--p graf-after--h3"><em class="markup--em markup--p-em">June 27, 2025</em></p><figure name="a5b5" id="a5b5" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*lYch5pWcEjOBd0SsQYFWOw.png" data-width="1536" data-height="1024" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*lYch5pWcEjOBd0SsQYFWOw.png"><figcaption class="imageCaption">How far down does it¬†go?</figcaption></figure><p name="4858" id="4858" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--figure"><span class="graf-dropCap">W</span>hen we started PM-011‚Ää‚Äî‚Ääadding file upload to our AI PM assistant‚Ää‚Äî‚Ääit seemed straightforward (and by we I mean me, Claude Opus, Claude Sonnet, and Cursor Agent). Users should be able to upload a CSV or PDF and ask questions about it. ‚ÄúJust add a file picker and wire it to the LLM,‚Äù I thought.</p><p name="1746" id="1746" class="graf graf--p graf-after--p">One week later, we‚Äôd built a file analysis system with type detection, domain-specific analyzers, and comprehensive error handling. More importantly, we‚Äôd discovered something experienced programmes and technical architects no doubt already knew: a<strong class="markup--strong markup--p-strong">rchitectural inconsistencies love to hide between systems, and integration is where they throw their surprise party.</strong></p><h3 name="1319" id="1319" class="graf graf--h3 graf-after--p">Domain models are sacred (no,¬†really!)</h3><p name="882d" id="882d" class="graf graf--p graf-after--h3">The first critical lesson came when we were implementing file analyzers. We had a domain model for <code class="markup--code markup--p-code">AnalysisResult</code> that looked like this:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="709f" id="709f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@dataclass</span><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalysisResult</span>:<br />    file_id: <span class="hljs-built_in">str</span><br />    analysis_type: AnalysisType<br />    summary: <span class="hljs-built_in">str</span><br />    key_findings: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]<br />    metadata: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]<br />    recommendations: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]<br />    generated_at: datetime</span></pre><p name="f6a2" id="f6a2" class="graf graf--p graf-after--pre">When we started testing the DocumentAnalyzer, we discovered it was storing extracted information in <code class="markup--code markup--p-code">metadata[&#39;key_points&#39;]</code> rather than the <code class="markup--code markup--p-code">key_findings</code> field. The temptation was obvious: modify the domain model to have a <code class="markup--code markup--p-code">key_points</code> field to make the test pass.</p><p name="3f5d" id="3f5d" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">This would have been architectural poison.</strong></p><p name="ae16" id="ae16" class="graf graf--p graf-after--p">Instead, we established a non-negotiable principle handed down from our chief architect when I asked how to build Piper Morgan the right way: <strong class="markup--strong markup--p-strong">Domain models are the contract. Implementation serves the domain, not vice versa.</strong> If a test expects different structure than the domain model provides, fix the test or the implementation‚Ää‚Äî‚Äänever the domain model.</p><p name="441d" id="441d" class="graf graf--p graf-after--p">This isn‚Äôt revolutionary thinking‚Ää‚Äî‚Ääit‚Äôs just applying Eric Evans‚Äô DDD (domain-driven design) principles to AI systems. But here‚Äôs what‚Äôs interesting: with AI outputs being inherently unpredictable, domain consistency becomes even more critical. <strong class="markup--strong markup--p-strong">You‚Äôre essentially building a normalizing layer between chaos and your application.</strong></p><p name="bbcc" id="bbcc" class="graf graf--p graf-after--p">This discipline paid dividends throughout the project. When we integrated multiple analyzers, they all conformed to the same contract. When we added error handling, we used the metadata field consistently. When we built the orchestration layer, it could handle all analysis types uniformly.</p><p name="9acb" id="9acb" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Key Insight</strong>: In AI systems, domain consistency is even more critical because you‚Äôre dealing with unpredictable outputs that need to be normalized into reliable structures.</p><h3 name="953d" id="953d" class="graf graf--h3 graf-after--p">Error handling as a design principle (not an afterthought)</h3><p name="f95f" id="f95f" class="graf graf--p graf-after--h3">Traditional software fails predictably‚Ää‚Äî‚Äänull references, type mismatches, network timeouts. AI systems fail creatively. Files might be corrupted in novel ways, LLMs might return unexpected formats, or analysis might succeed partially.</p><p name="30d5" id="30d5" class="graf graf--p graf-after--p">When working on a natural language chatbot at a mental health startup, we had to worry even more about how error conditions might lead to irregular and distressing communications!</p><p name="8992" id="8992" class="graf graf--p graf-after--p">What I learned building Piper Morgan is to design error handling as a first-class architectural concern:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="275f" id="275f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-comment"># WRONG: Let exceptions bubble up inconsistently</span><br /><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_document</span>(<span class="hljs-params">self, file_path: <span class="hljs-built_in">str</span></span>) -&gt; AnalysisResult:<br />    content = extract_text(file_path)  <span class="hljs-comment"># Might throw</span><br />    summary = self.llm_client.summarize(content)  <span class="hljs-comment"># Might fail</span><br />    <span class="hljs-keyword">return</span> AnalysisResult(summary=summary, ...)<br /><br /><span class="hljs-comment"># RIGHT: Consistent error handling with informative metadata</span><br /><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_document</span>(<span class="hljs-params">self, file_path: <span class="hljs-built_in">str</span></span>) -&gt; AnalysisResult:<br />    <span class="hljs-keyword">try</span>:<br />        content = extract_text(file_path)<br />        summary = self.llm_client.summarize(content)<br />        <span class="hljs-keyword">return</span> AnalysisResult(<br />            summary=summary,<br />            key_findings=key_points,<br />            metadata={<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>, <span class="hljs-string">&quot;content_length&quot;</span>: <span class="hljs-built_in">len</span>(content)}<br />        )<br />    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br />        <span class="hljs-keyword">return</span> AnalysisResult(<br />            summary=<span class="hljs-string">&quot;Analysis failed&quot;</span>,<br />            key_findings=[],<br />            metadata={<br />                <span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-built_in">str</span>(e),<br />                <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;failed&quot;</span>,<br />                <span class="hljs-string">&quot;failure_stage&quot;</span>: <span class="hljs-string">&quot;text_extraction&quot;</span><br />            }<br />        )</span></pre><p name="0bfb" id="0bfb" class="graf graf--p graf-after--pre">This pattern‚Ää‚Äî‚Ääalways return a result object with error information in metadata‚Ää‚Äî‚Ääenabled sophisticated error recovery. The orchestration layer could provide partial results, explain what went wrong, and suggest next steps.</p><h3 name="763b" id="763b" class="graf graf--h3 graf-after--p">Test-driven development with AI assistance</h3><p name="0e43" id="0e43" class="graf graf--p graf-after--h3">Building with AI assistance, we discovered that TDD requires extra discipline. The AI can generate impressive code that passes tests, but it can also generate tests that accommodate broken implementations.</p><p name="d4ad" id="d4ad" class="graf graf--p graf-after--p">I‚Äôve been getting implementation guidance from Claude and then using Cursor Agent to edit files and run tests without my usual typo-prone, indentation-deprived mistakes that add hours to debugging. Unfortunately, CA (as I‚Äôve come to think of it) is always a bit too eager and the moment a test fails, it offers to <em class="markup--em markup--p-em">edit the test</em> so it will pass.</p><p name="2200" id="2200" class="graf graf--p graf-after--p">This is anathema and it even claims to be aware that we are doing TDD! I have learned to ask Claude to write prompts for CA for me that box it in and strictly tell it to report back and not start hacking away to chase bugs or editing tests willy-nilly</p><p name="65c6" id="65c6" class="graf graf--p graf-after--p">We established strict TDD discipline:</p><ol class="postList"><li name="c2bd" id="c2bd" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Write tests that reflect the domain contract first</strong></li><li name="d531" id="d531" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Verify tests fail for the right reasons</strong></li><li name="6662" id="6662" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Implement minimal code to pass tests</strong></li><li name="4b59" id="4b59" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Refactor while maintaining test integrity</strong></li></ol><p name="1bf9" id="1bf9" class="graf graf--p graf-after--li">The critical insight: <strong class="markup--strong markup--p-strong">When tests fail, don‚Äôt change the test unless the domain contract is wrong.</strong></p><p name="9931" id="9931" class="graf graf--p graf-after--p">During DocumentAnalyzer implementation, we had two failing tests that expected the analyzer to throw exceptions. But our established pattern was to return results with error metadata. The failing tests weren‚Äôt indicating missing implementation‚Ää‚Äî‚Ääthey were documenting an obsolete contract that needed updating.</p><p name="7b13" id="7b13" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">AI assistance makes it easy to ‚Äúfix‚Äù tests by changing expectations rather than implementation. Resist this temptation.</strong></p><h3 name="01ec" id="01ec" class="graf graf--h3 graf-after--p">Architecture emerges from integration (surprise!)</h3><p name="5325" id="5325" class="graf graf--p graf-after--h3">OK, this is where it gets interesting. The most revealing architectural discoveries came not from planning but from trying to make components work together.</p><p name="1e66" id="1e66" class="graf graf--p graf-after--p">When implementing file resolution (matching ‚Äúanalyze the uploaded spreadsheet‚Äù to specific files), we discovered we had two separate orchestration systems:</p><ul class="postList"><li name="3e6e" id="3e6e" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">WorkflowExecutor</strong>: Legacy prototype code from initial GitHub integration</li><li name="9db5" id="9db5" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">OrchestrationEngine</strong>: Canonical task-based architecture per our design docs</li></ul><p name="2a6c" id="2a6c" class="graf graf--p graf-after--li">This duplication was invisible until integration forced us to choose. Classic. Not unlike the way we frequently stumble on parallel government systems doing almost the exact same thing.</p><p name="04be" id="04be" class="graf graf--p graf-after--p">But here‚Äôs the twist: What looked like technical debt was actually intentional architectural separation:</p><ul class="postList"><li name="3754" id="3754" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">AsyncPG database</strong>: For operational entities (files, workflows) requiring performance</li><li name="aa57" id="aa57" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">SQLAlchemy ORM</strong>: For domain entities (projects, features) needing rich relationships</li></ul><p name="3889" id="3889" class="graf graf--p graf-after--li">Sometimes ‚Äútechnical debt‚Äù is actually undocumented architectural decisions. Who knew? (Everyone who‚Äôs maintained legacy systems, that‚Äôs who.)</p><h3 name="e93e" id="e93e" class="graf graf--h3 graf-after--p">Building feedback loops from day¬†one</h3><p name="407e" id="407e" class="graf graf--p graf-after--h3">The most important architectural decision wasn‚Äôt about code‚Ää‚Äî‚Ääit was about learning. Every analysis result includes metadata that enables improvement:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="5036" id="5036" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">metadata = {<br />    <span class="hljs-string">&quot;confidence_score&quot;</span>: <span class="hljs-number">0.85</span>,<br />    <span class="hljs-string">&quot;analysis_duration&quot;</span>: <span class="hljs-number">2.3</span>,<br />    <span class="hljs-string">&quot;llm_tokens_used&quot;</span>: <span class="hljs-number">1247</span>,<br />    <span class="hljs-string">&quot;user_corrections&quot;</span>: [],<br />    <span class="hljs-string">&quot;improvement_suggestions&quot;</span>: []<br />}</span></pre><p name="6fd9" id="6fd9" class="graf graf--p graf-after--pre">This metadata serves multiple purposes:</p><ul class="postList"><li name="a043" id="a043" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Quality Assessment</strong>: Track which analyses are most/least reliable</li><li name="191f" id="191f" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Performance Monitoring</strong>: Identify bottlenecks and optimize accordingly</li><li name="dc24" id="dc24" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Learning Data</strong>: Capture user corrections for future model improvements</li><li name="ee88" id="ee88" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Debugging Context</strong>: Understand failures with complete context</li></ul><p name="8689" id="8689" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Critical Insight</strong>: AI systems aren‚Äôt just software that works‚Ää‚Äî‚Ääthey‚Äôre software that learns. Building learning mechanisms after the fact is much harder than designing them in from the beginning.</p><p name="924d" id="924d" class="graf graf--p graf-after--p">Really, this is just good instrumentation. The difference is that with AI systems, the instrumentation becomes training data.</p><h3 name="0767" id="0767" class="graf graf--h3 graf-after--p">Vertical slices reveal¬†truth</h3><p name="13a5" id="13a5" class="graf graf--p graf-after--h3">Our biggest breakthrough came from testing complete user journeys rather than individual components. We called this ‚Äúvertical slice development‚Äù‚Ää‚Äî‚Ääimplementing the thinnest possible end-to-end feature and then expanding. (The vertical slice concept seems to have arisen in the early agile/XP days, but I still haven‚Äôt tracked down where the metaphor of falling through a series of holes in swiss cheese came from, though ‚Äúswiss cheeseholes‚Äù quickly became a shorthand in our chats.)</p><p name="55a5" id="55a5" class="graf graf--p graf-after--p">The vertical slice for file analysis was: upload CSV ‚Üí detect type ‚Üí analyze ‚Üí return results. This simple journey revealed:</p><ul class="postList"><li name="2926" id="2926" class="graf graf--li graf-after--p">File resolution needed confidence scoring for ambiguity (‚Äúanalyze the spreadsheet‚Äù when multiple CSVs exist)</li><li name="1dab" id="1dab" class="graf graf--li graf-after--li">Type detection couldn‚Äôt just check file extensions</li><li name="43bc" id="43bc" class="graf graf--li graf-after--li">We had duplicate orchestration systems (oops)</li><li name="64c8" id="64c8" class="graf graf--li graf-after--li">Some ‚Äútechnical debt‚Äù was intentional separation (double oops)</li></ul><p name="e92e" id="e92e" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">None of these requirements were visible when building components in isolation.</strong></p><p name="cb31" id="cb31" class="graf graf--p graf-after--p">Building horizontally (all file types, then all analyzers, then all integrations) would have missed these insights until much later in development.</p><h3 name="88b3" id="88b3" class="graf graf--h3 graf-after--p">Domain-first AI architecture (AI is ‚Äújust another service‚Äù)</h3><p name="324b" id="324b" class="graf graf--p graf-after--h3">The overarching lesson: <strong class="markup--strong markup--p-strong">successful AI systems are domain-driven systems that happen to use AI, not AI systems that happen to solve domain problems (</strong>just applying what we learned from the microservices hype cycle to the AI hype cycle)<strong class="markup--strong markup--p-strong">.</strong></p><p name="f888" id="f888" class="graf graf--p graf-after--p">Our file analysis system works because:</p><ul class="postList"><li name="171f" id="171f" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Domain models define clear contracts</strong> that AI outputs must conform to</li><li name="444e" id="444e" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Business logic lives in services</strong>, not in prompt engineering</li><li name="7788" id="7788" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Error handling follows established patterns</strong>, making the system predictable</li><li name="0405" id="0405" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Integration points are explicit</strong>, making the system composable</li><li name="eecf" id="eecf" class="graf graf--li graf-after--li">The AI provides <strong class="markup--strong markup--li-strong">intelligence within structure</strong></li></ul><p name="f8b1" id="f8b1" class="graf graf--p graf-after--li">The AI is basically a really clever but somewhat chaotic service in our architecture. No more magical than a database or message queue‚Ää‚Äî‚Ääjust different failure modes.</p><h3 name="b330" id="b330" class="graf graf--h3 graf-after--p">What this means for your AI¬†projects</h3><ol class="postList"><li name="4bb6" id="4bb6" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Design domain models first</strong>‚Ää‚Äî‚ÄäThe AI will thank you later (well, not literally)</li><li name="c860" id="c860" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Treat AI like any external service</strong>‚Ää‚Äî‚ÄäValidate outputs, handle errors, monitor performance</li><li name="56d4" id="56d4" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Build feedback loops early</strong>‚Ää‚Äî‚ÄäNot because it‚Äôs ‚ÄúAI best practice‚Äù but because it‚Äôs good engineering</li><li name="5086" id="5086" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Use vertical slices‚Ää</strong>‚Äî‚ÄäIntegration reveals truth faster than isolated components</li><li name="35ff" id="35ff" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Maintain architectural discipline</strong> even when AI assistance makes shortcuts tempting: resist</li></ol><h3 name="413f" id="413f" class="graf graf--h3 graf-after--li">The Path¬†Forward</h3><p name="5785" id="5785" class="graf graf--p graf-after--h3">A week ago, ‚Äúanalyze this file‚Äù was a nice-to-have feature. Today, it‚Äôs a sophisticated system that can intelligently process CSV data, extract insights from PDFs, understand document structure, handle errors gracefully, and learn from user feedback.</p><p name="a3ca" id="a3ca" class="graf graf--p graf-after--p">More importantly, we‚Äôve established patterns for building AI capabilities that integrate cleanly with traditional software architecture. The next features‚Ää‚Äî‚Äädocument ingestion, GitHub analysis, workflow automation‚Ää‚Äî‚Ääcan build on this foundation rather than starting from scratch.</p><p name="c708" id="c708" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The ultimate insight</strong>: Building AI products isn‚Äôt about having the smartest models. It‚Äôs about creating systems that make AI capabilities reliable, predictable, and composable.</p><p name="c5fa" id="c5fa" class="graf graf--p graf-after--p">Building AI products isn‚Äôt about having the smartest models. It‚Äôs about creating systems that make AI capabilities reliable, predictable, and composable. That requires the same architectural discipline we‚Äôve always needed‚Ää‚Äî‚Ääjust with weirder bugs.</p><p name="3535" id="3535" class="graf graf--p graf-after--p graf--trailing">It remains to be seen how some of these trusted patterns will hold up as the software models continue to evolve but I find it interesting right now that the practices most needed to develop reliable LLM-powered systems are more or less just today‚Äôs best practices for robust, well-architected software, occasionally stretched to accommodate this strange new world we‚Äôre in.</p></div></div>f:["$","$L1a",null,{"post":{"title":"Integration Reveals All: How Building File Analysis Exposed Hidden Architecture","excerpt":"","url":"/blog/integration-reveals-all","publishedAt":"Invalid Date","publishedAtISO":"","author":"christian crumlish","readingTime":"5 min read","tags":["Building in Public"],"guid":"https://medium.com/building-piper-morgan/3d696dbf2803","featuredImage":"/assets/blog-images/3d696dbf2803-featured.webp","slug":"integration-reveals-all","category":"building","workDate":"Jun 27, 2025","workDateISO":"2025-06-27T00:00:00.000Z","cluster":"genesis-architecture","featured":false},"content":{"title":"Integration Reveals All: How Building File Analysis Exposed Hidden Architecture","subtitle":"June 27, 2025","content":"$1b","author":"christian crumlish","canonicalLink":"","publishedDate":"2025-06-27T13:29:26.570Z","filename":"2025-06-27_Integration-Reveals-All--How-Building-File-Analysis-Exposed-Hidden-Architecture-3d696dbf2803.html"}}]
15:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
11:null
1c:I[8175,[],"IconMark"]
13:{"metadata":[["$","title","0",{"children":"Integration Reveals All: How Building File Analysis Exposed Hidden Architecture | Piper Morgan"}],["$","meta","1",{"name":"description","content":"June 27, 2025"}],["$","meta","2",{"name":"author","content":"Christian Crumlish"}],["$","meta","3",{"name":"keywords","content":"AI,Product Management,Methodology,Building in Public"}],["$","meta","4",{"name":"creator","content":"Christian Crumlish"}],["$","meta","5",{"name":"publisher","content":"Christian Crumlish"}],["$","meta","6",{"name":"robots","content":"index, follow"}],["$","meta","7",{"name":"googlebot","content":"index, follow"}],["$","link","8",{"rel":"canonical","href":"https://pipermorgan.ai/"}],["$","meta","9",{"name":"format-detection","content":"telephone=no, address=no, email=no"}],["$","meta","10",{"property":"og:title","content":"Integration Reveals All: How Building File Analysis Exposed Hidden Architecture"}],["$","meta","11",{"property":"og:description","content":"June 27, 2025"}],["$","meta","12",{"property":"og:type","content":"article"}],["$","meta","13",{"property":"article:author","content":"christian crumlish"}],["$","meta","14",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","15",{"name":"twitter:title","content":"Integration Reveals All: How Building File Analysis Exposed Hidden Architecture"}],["$","meta","16",{"name":"twitter:description","content":"June 27, 2025"}],["$","link","17",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"32x33"}],["$","link","18",{"rel":"icon","href":"/favicon.ico","sizes":"32x32","type":"image/x-icon"}],["$","link","19",{"rel":"icon","href":"/pm-favicon-16.png","sizes":"16x16","type":"image/png"}],["$","link","20",{"rel":"icon","href":"/pm-favicon-32.png","sizes":"32x32","type":"image/png"}],["$","link","21",{"rel":"icon","href":"/pm-favicon-48.png","sizes":"48x48","type":"image/png"}],["$","link","22",{"rel":"apple-touch-icon","href":"/pm-favicon-180.png","sizes":"180x180","type":"image/png"}],["$","link","23",{"rel":"icon","href":"/pm-favicon-192.png","sizes":"192x192","type":"image/png"}],["$","$L1c","24",{}]],"error":null,"digest":"$undefined"}
18:"$13:metadata"
